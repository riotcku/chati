<link rel="import" href="../../bower_components/polymer/polymer.html">

<dom-module id="chati-main">
  <style>
    :host {
      display: block;
      @apply(--layout-vertical);
      height: 100%;
      border: 1px solid #333;
    }

    .chat-box {
      background-color: white;
    }

    .input-container {
      @apply(--layout-horizontal);
      border-top: 1px solid black;
      position: absolute;
      bottom: 0;
      width: 100%;
      min-height: 80px;
      background-color: white;
    }
  </style>
  <template>
    <!-- Chatting Interface-->
    <div class="chat-box flex">
      <chati-chat id="chatiChat"
        personality="{{chatiType}}"></chati-chat>
      <!-- <input is="iron-input" bind-value="{{bindValue}}" value="{{value::input}}"> -->

    </div>
    <!-- Input Box -->
    <div class="input-container">
      <span class="input-left flex-10">
        <paper-input id="mainInput"
          no-label-float
          value="{{newChat}}"
          label="Press Enter to send." autofocus></paper-input>
        <iron-a11y-keys keys="enter" on-keys-pressed="_enterChat"></iron-a11y-keys>
      </span>
      <span class="input-right flex-2">
        <paper-button raised id="chat-button" on-click="_enterChat">Chat</paper-button>

      </span>
    </div>
  </template>

  <script>
    (function() {
      'use strict';

      Polymer({
        is: 'chati-main',

        listeners: {
          chatiInput: 'enterChat'
        },

        properties: {
          newChat: {
            type: String,
            notify: true,
            value: ''
          },
          chatiType: {
            type: String,
            notify: true
          }
        },

        _enterChat: function() {
          this.$.chatiChat._enter(this.newChat);
          this.newChat = '';
        },

        _clearChat: function() {
          this.newChat = '';
        },



        ready: function() {
          console.log(this.chatiType);
        }
      });
    })();
  </script>

</dom-module>
